# Solace Agent Mesh (SAM) Custom Configuration
# Replace all placeholder values with your actual configuration

# SAM Core Configuration
sam:
  # Enable enterprise features (agent builder, etc.)
  enterprise: true
  # Disable authorization for dev/quickstart (allows access without OIDC)
  # ⚠️ NOT RECOMMENDED for production use
  authorization:
    enabled: false
  # DNS name for accessing SAM (must be DNS-resolvable and point to LoadBalancer IP)
  dnsName: "sam.example.com"  # TODO: Replace with your actual DNS name
  # Secret key for session management (generate a secure random string)
  sessionSecretKey: "change-me-to-a-secure-random-string"

# Solace Broker Configuration
broker:
  url: "wss://broker-url:port" # e.g., wss://mr2zq0g0f1.messaging.solace.cloud:443
  clientUsername: "broker-username"
  password: "broker-password"
  vpn: "broker-vpn-name"

# LLM Service Configuration (e.g., OpenAI)
llmService:
  planningModel: "planningModel" # e.g., "gpt-4o"
  generalModel: "generalModel" # e.g., "gpt-4o"
  reportModel: "reportModel" # e.g., "gpt-4o"
  imageModel: "imageModel" # e.g., "dall-e-3"
  transcriptionModel: "transcriptionModel" # e.g., "whisper-1"
  llmServiceEndpoint: "https://api.openai.com/v1"
  llmServiceApiKey: "your-llm-service-api-key"

# Kubernetes Service Configuration
service:
  type: LoadBalancer  # Options: LoadBalancer, ClusterIP, NodePort
  annotations: {}
  tls:
    enabled: false
    passphrase: ""  # Optional: Add if your TLS key is encrypted

# =============================================================================
# CONTAINER IMAGE REGISTRY
# =============================================================================
# Use Solace's private GCR registry for all images (requires imagePullSecret)
# Comment out to use default Docker Hub registry
global:
  imageRegistry: gcr.io/gcp-maas-prod

# =============================================================================
# BUNDLED PERSISTENCE (PostgreSQL + SeaweedFS)
# =============================================================================
# Deploy in-cluster PostgreSQL and SeaweedFS for data persistence
# For production, consider using external managed services instead
# See: https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/docs/persistence
  persistence:
    enabled: true
    namespaceId: "solace-agent-mesh-no-auth"  # Must be unique per SAM installation

# =============================================================================
# PERSISTENCE LAYER OVERRIDES (Optional)
# =============================================================================
# When using Solace's GCR registry, specify GCR-specific image tags
# When using Docker Hub, these overrides are not needed
persistence-layer:
  postgresql:
    image:
      tag: "18.0-trixie"  # GCR tag (Docker Hub default: "18.0")
    # persistence:
    #   storageClassName: "gp3"  # Optional: Kubernetes storage class (e.g., gp3 for AWS EBS)
  seaweedfs:
    image:
      tag: "3.97-compliant"  # GCR tag (Docker Hub default: "3.97")
    # persistence:
    #   storageClassName: "gp3"  # Optional: Kubernetes storage class

# SAM Deployment Configuration
samDeployment:

  # Required when using GCR registry
  imagePullSecret: gcr-reg-secret

  # Main SAM Image
  image:
    repository: gcr.io/gcp-maas-prod/solace-agent-mesh-enterprise
    tag: 1.65.45
    pullPolicy: Always

  # Agent Deployer image
  # This container is responsible for deploying and managing agents
  agentDeployer:
    image:
      repository: gcr.io/gcp-maas-prod/sam-agent-deployer
      tag: 1.1.4
      pullPolicy: Always
