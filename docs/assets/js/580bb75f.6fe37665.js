"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[882],{3565:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"standalone-agent-deployment","title":"Standalone Agent and Workflow Deployment","description":"This guide explains how to deploy Solace Agent Mesh agents and workflows directly, without using the agent-deployer microservice.","source":"@site/docs/standalone-agent-deployment.md","sourceDirName":".","slug":"/standalone-agent-deployment","permalink":"/solace-agent-mesh-helm-quickstart/docs/standalone-agent-deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/edit/main/docs/standalone-agent-deployment.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Standalone Agent and Workflow Deployment"},"sidebar":"tutorialSidebar","previous":{"title":"Persistence Configuration","permalink":"/solace-agent-mesh-helm-quickstart/docs/persistence"},"next":{"title":"Troubleshooting","permalink":"/solace-agent-mesh-helm-quickstart/docs/troubleshooting"}}');var l=s(4848),i=s(8453);const t={sidebar_position:4,title:"Standalone Agent and Workflow Deployment"},a="Standalone Agent and Workflow Deployment Guide",o={},d=[{value:"Overview",id:"overview",level:2},{value:"When to Use Standalone Deployment",id:"when-to-use-standalone-deployment",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Deployment Steps",id:"deployment-steps",level:2},{value:"Step 1: Prepare Agent or Workflow Configuration File",id:"step-1-prepare-agent-or-workflow-configuration-file",level:3},{value:"Step 2: Prepare Values File",id:"step-2-prepare-values-file",level:3},{value:"Step 3: Create Service Account (If Not Exists)",id:"step-3-create-service-account-if-not-exists",level:3},{value:"Step 4: Install the Agent or Workflow Chart",id:"step-4-install-the-agent-or-workflow-chart",level:3},{value:"Step 5: Verify Deployment",id:"step-5-verify-deployment",level:3},{value:"Configuration Reference",id:"configuration-reference",level:2},{value:"Required Values",id:"required-values",level:3},{value:"Database Requirements",id:"database-requirements",level:3},{value:"S3 Storage Requirements",id:"s3-storage-requirements",level:3},{value:"Comparison: Deployer vs Standalone Mode",id:"comparison-deployer-vs-standalone-mode",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Agent Pod Not Starting",id:"agent-pod-not-starting",level:3},{value:"Init Container Fails",id:"init-container-fails",level:3},{value:"Agent Configuration Errors",id:"agent-configuration-errors",level:3},{value:"Upgrading Agents or Workflows",id:"upgrading-agents-or-workflows",level:2},{value:"Uninstalling Agents or Workflows",id:"uninstalling-agents-or-workflows",level:2},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Using Separate Database and S3 Secrets",id:"using-separate-database-and-s3-secrets",level:3},{value:"Custom Resource Limits",id:"custom-resource-limits",level:3},{value:"Additional Environment Variables",id:"additional-environment-variables",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"standalone-agent-and-workflow-deployment-guide",children:"Standalone Agent and Workflow Deployment Guide"})}),"\n",(0,l.jsxs)(n.p,{children:["This guide explains how to deploy Solace Agent Mesh agents and workflows directly, without using the ",(0,l.jsx)(n.code,{children:"agent-deployer"})," microservice."]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsx)(n.p,{children:"Workflows and agents are deployed in the same way. A workflow usually involves multiple agents, which can be loaded either into a single pod or across multiple pods. As with agents, you must properly configure any supporting services such as artifacts, persistent storage, LLMs, event brokers, and namespaces."})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"There are two ways to deploy SAM agents and workflows:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Via Agent Deployer"})," (Default): The SAM platform includes an agent-deployer microservice that dynamically deploys agents via the UI/API (only available for agents)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Standalone Deployment"})," (This Guide): Deploy agents and workflows directly using ",(0,l.jsx)(n.code,{children:"helm install"})," commands"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"when-to-use-standalone-deployment",children:"When to Use Standalone Deployment"}),"\n",(0,l.jsx)(n.p,{children:"Use standalone deployment when you:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Want to deploy agents or workflows independently of the main SAM platform"}),"\n",(0,l.jsx)(n.li,{children:"Need direct control over agent or workflow deployment and lifecycle"}),"\n",(0,l.jsx)(n.li,{children:"Want to manage agents or workflows using GitOps workflows"}),"\n",(0,l.jsx)(n.li,{children:"Are deploying agents or workflows in different clusters/namespaces"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsx)(n.p,{children:"Before deploying a standalone agent or workflow, you need:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Kubernetes cluster"})," with kubectl access"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Helm 3.19.0+"})," installed"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"PostgreSQL database"})," (17+) - agent needs a database for state management"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"S3-compatible storage"})," - agent needs object storage for file handling"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Solace Event Broker"})," - connection URL and credentials"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"LLM Service"})," - API endpoint and credentials (e.g., OpenAI)"]}),"\n"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"A Kubernetes cluster with kubectl access"}),"\n",(0,l.jsx)(n.li,{children:"Helm 3.19.0+ installed"}),"\n",(0,l.jsx)(n.li,{children:"PostgreSQL database (version 17+). The agent needs a database for state management"}),"\n",(0,l.jsx)(n.li,{children:"S3-compatible storage. The agent needs object storage for file handling."}),"\n",(0,l.jsx)(n.li,{children:"Solace Event Broker. You will need the connection URL and credentials."}),"\n",(0,l.jsx)(n.li,{children:"LLM Service (e.g., OpenAI). You will need the API endpoint and credentials."}),"\n",(0,l.jsx)(n.li,{children:"Agent configuration file. The YAML file defining which agents/services to enable."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"deployment-steps",children:"Deployment Steps"}),"\n",(0,l.jsx)(n.h3,{id:"step-1-prepare-agent-or-workflow-configuration-file",children:"Step 1: Prepare Agent or Workflow Configuration File"}),"\n",(0,l.jsxs)(n.p,{children:["Create an agent or workflow configuration file (e.g., ",(0,l.jsx)(n.code,{children:"my-agent-config.yaml"}),") that defines which agents and services to enable. Refer to the Solace Agent Mesh documentation for the configuration format."]}),"\n",(0,l.jsx)(n.p,{children:"Example agent structure (format may vary - consult SAM docs):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"agents:\n  - name: web_request\n    enabled: true\n  - name: global\n    enabled: true\n# ... additional configuration\n"})}),"\n",(0,l.jsx)(n.p,{children:"Example workflow structure:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apps:\n  - name: my_workflow\n    app_module: solace_agent_mesh.workflow.app\n    broker:\n      # ... broker configuration\n\n    app_config:\n      namespace: ${NAMESPACE}\n      agent_name: "MyWorkflow"\n\n      workflow:\n        description: "Process incoming orders"\n        version: "1.0.0"\n\n        input_schema:\n          type: object\n          properties:\n            order_id:\n              type: string\n          required: [order_id]\n\n        nodes:\n          - id: validate_order\n            type: agent\n            agent_name: "OrderValidator"\n            input:\n              order_id: "{{workflow.input.order_id}}"\n\n          - id: process_payment\n            type: agent\n            agent_name: "PaymentProcessor"\n            depends_on: [validate_order]\n            input:\n              order_data: "{{validate_order.output}}"\n\n        output_mapping:\n          status: "{{process_payment.output.status}}"\n          confirmation: "{{process_payment.output.confirmation_number}}"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"step-2-prepare-values-file",children:"Step 2: Prepare Values File"}),"\n",(0,l.jsx)(n.p,{children:"Download the sample values file:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl -O https://raw.githubusercontent.com/SolaceProducts/solace-agent-mesh-helm-quickstart/main/samples/agent/agent-standalone-values.yaml\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Edit ",(0,l.jsx)(n.code,{children:"agent-standalone-values.yaml"})," and configure:"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Required Configuration:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"agentId"}),": Unique identifier for this agent or workflow instance"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"solaceBroker"}),": Broker connection details"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"llmService"}),": LLM service configuration"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"persistence"}),": Database and S3 credentials"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Persistence Options:"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option 1: Use Existing Secrets (Recommended)"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'persistence:\n  existingSecrets:\n    database: "my-database-secret"  # Secret must contain DATABASE_URL\n    s3: "my-s3-secret"              # Secret must contain S3_ENDPOINT_URL, S3_BUCKET_NAME, AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Option 2: Provide Credentials Directly"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'persistence:\n  database:\n    url: "postgresql+psycopg2://user:password@hostname:5432/dbname"\n  s3:\n    endpointUrl: "https://s3.amazonaws.com"\n    bucketName: "my-bucket"\n    accessKey: "your-access-key"\n    secretKey: "your-secret-key"\n    region: "us-east-1"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"step-3-create-service-account-if-not-exists",children:"Step 3: Create Service Account (If Not Exists)"}),"\n",(0,l.jsx)(n.p,{children:"The agent or workflow needs a Kubernetes service account with permissions to access secrets:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl create serviceaccount solace-agent-mesh-sa -n your-namespace\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-4-install-the-agent-or-workflow-chart",children:"Step 4: Install the Agent or Workflow Chart"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Agent"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm install my-agent solace-agent-mesh/sam-agent \\\n  -f agent-standalone-values.yaml \\\n  --set-file config.agentYaml=./my-agent-config.yaml \\\n  -n your-namespace\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Workflow"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm install my-workflow solace-agent-mesh/sam-agent \\\n  -f agent-standalone-values.yaml \\\n  --set-file config.agentYaml=./my-workflow-config.yaml \\\n  -n your-namespace\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Important Parameters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"my-agent"}),": Helm release name (choose a unique name per agent or workflow)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-f agent-standalone-values.yaml"}),": Your customized values file"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"--set-file config.agentYaml=..."}),": Path to your agent or workflow or workflow configuration file"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-n your-namespace"}),": Kubernetes namespace to deploy into"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"step-5-verify-deployment",children:"Step 5: Verify Deployment"}),"\n",(0,l.jsx)(n.p,{children:"Check the agent or workflow pod is running:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n your-namespace -l app.kubernetes.io/name=sam-agent\n"})}),"\n",(0,l.jsx)(n.p,{children:"Check the agent or workflow logs:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n your-namespace -l app.kubernetes.io/name=sam-agent --tail=100 -f\n"})}),"\n",(0,l.jsx)(n.h2,{id:"configuration-reference",children:"Configuration Reference"}),"\n",(0,l.jsx)(n.h3,{id:"required-values",children:"Required Values"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Parameter"}),(0,l.jsx)(n.th,{children:"Description"}),(0,l.jsx)(n.th,{children:"Example"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"deploymentMode"})}),(0,l.jsx)(n.td,{children:'Deployment mode (must be "standalone")'}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"standalone"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"agentId"})}),(0,l.jsx)(n.td,{children:"Unique agent identifier"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"my-custom-agent"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"solaceBroker.url"})}),(0,l.jsx)(n.td,{children:"Solace broker connection URL"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"wss://broker.solace.cloud:443"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"solaceBroker.username"})}),(0,l.jsx)(n.td,{children:"Broker username"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"solace-user"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"solaceBroker.password"})}),(0,l.jsx)(n.td,{children:"Broker password"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"password123"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"solaceBroker.vpn"})}),(0,l.jsx)(n.td,{children:"Broker VPN name"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"default"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"llmService.generalModelName"})}),(0,l.jsx)(n.td,{children:"LLM model name"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"gpt-4o"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"llmService.endpoint"})}),(0,l.jsx)(n.td,{children:"LLM API endpoint"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"https://api.openai.com/v1"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"llmService.apiKey"})}),(0,l.jsx)(n.td,{children:"LLM API key"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"sk-..."})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"persistence.database.url"})}),(0,l.jsx)(n.td,{children:"Database connection URL"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"postgresql+psycopg2://..."})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"persistence.s3.endpointUrl"})}),(0,l.jsx)(n.td,{children:"S3 endpoint"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"https://s3.amazonaws.com"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"persistence.s3.bucketName"})}),(0,l.jsx)(n.td,{children:"S3 bucket name"}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"my-bucket"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"config.agentYaml"})}),(0,l.jsx)(n.td,{children:"Agent configuration (via --set-file)"}),(0,l.jsx)(n.td,{children:"(file path)"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"database-requirements",children:"Database Requirements"}),"\n",(0,l.jsx)(n.p,{children:"The agent requires a PostgreSQL database (version 17+). The init container will automatically:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Create a database user (based on ",(0,l.jsx)(n.code,{children:"agentId"})," and ",(0,l.jsx)(n.code,{children:"namespaceId"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"Create a database for the agent"}),"\n",(0,l.jsx)(n.li,{children:"Grant necessary permissions"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Database URL Format:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"postgresql+psycopg2://username:password@hostname:port/database_name\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"For Supabase Connection Pooler:"}),"\nThe chart automatically detects and handles Supabase tenant ID qualification if present in the database secret."]}),"\n",(0,l.jsx)(n.h3,{id:"s3-storage-requirements",children:"S3 Storage Requirements"}),"\n",(0,l.jsx)(n.p,{children:"The agent requires S3-compatible storage for file handling. Supported providers:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Amazon S3"}),"\n",(0,l.jsx)(n.li,{children:"MinIO"}),"\n",(0,l.jsx)(n.li,{children:"SeaweedFS"}),"\n",(0,l.jsx)(n.li,{children:"Any S3-compatible object storage"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Required S3 Configuration:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Endpoint URL"}),"\n",(0,l.jsx)(n.li,{children:"Bucket name (must exist)"}),"\n",(0,l.jsx)(n.li,{children:"Access credentials (key ID and secret key)"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"comparison-deployer-vs-standalone-mode",children:"Comparison: Deployer vs Standalone Mode"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Aspect"}),(0,l.jsx)(n.th,{children:"Agent Deployer Mode"}),(0,l.jsx)(n.th,{children:"Standalone Mode"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Deployment"})}),(0,l.jsx)(n.td,{children:"Via SAM UI/API"}),(0,l.jsxs)(n.td,{children:["Via ",(0,l.jsx)(n.code,{children:"helm install"})," command"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Configuration Discovery"})}),(0,l.jsx)(n.td,{children:"Auto-discovers persistence secrets"}),(0,l.jsx)(n.td,{children:"Explicit configuration required"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Agent Config"})}),(0,l.jsx)(n.td,{children:"Provided by deployer"}),(0,l.jsxs)(n.td,{children:["Must provide via ",(0,l.jsx)(n.code,{children:"--set-file"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Use Case"})}),(0,l.jsx)(n.td,{children:"Dynamic agent management"}),(0,l.jsx)(n.td,{children:"Static/GitOps workflows"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.strong,{children:"Lifecycle"})}),(0,l.jsx)(n.td,{children:"Managed by SAM platform"}),(0,l.jsx)(n.td,{children:"Managed by Helm/K8s"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"agent-pod-not-starting",children:"Agent Pod Not Starting"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check pod events:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl describe pod -n your-namespace -l app.kubernetes.io/name=sam-agent\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common issues:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Missing or incorrect database credentials"}),"\n",(0,l.jsx)(n.li,{children:"Database not accessible from cluster"}),"\n",(0,l.jsx)(n.li,{children:"S3 credentials invalid"}),"\n",(0,l.jsx)(n.li,{children:"Missing agent configuration file"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"init-container-fails",children:"Init Container Fails"}),"\n",(0,l.jsx)(n.p,{children:"The init container creates the database and user. Check logs:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n your-namespace -l app.kubernetes.io/name=sam-agent -c db-init\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common issues:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Admin credentials in persistence secret are incorrect"}),"\n",(0,l.jsx)(n.li,{children:"Database server not reachable"}),"\n",(0,l.jsx)(n.li,{children:"Admin user lacks CREATE DATABASE permissions"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"agent-configuration-errors",children:"Agent Configuration Errors"}),"\n",(0,l.jsx)(n.p,{children:"If the agent starts but fails to initialize:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n your-namespace -l app.kubernetes.io/name=sam-agent -c sam\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common issues:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Invalid agent configuration YAML format"}),"\n",(0,l.jsx)(n.li,{children:"Referenced agents/services don't exist"}),"\n",(0,l.jsx)(n.li,{children:"Missing required configuration fields"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"upgrading-agents-or-workflows",children:"Upgrading Agents or Workflows"}),"\n",(0,l.jsx)(n.p,{children:"To upgrade an agent or workflow deployment:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Agent"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm upgrade my-agent solace-agent-mesh/sam-agent \\\n  -f agent-standalone-values.yaml \\\n  --set-file config.agentYaml=./my-agent-config.yaml \\\n  -n your-namespace\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Workflow"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm upgrade my-workflow solace-agent-mesh/sam-agent \\\n  -f agent-standalone-values.yaml \\\n  --set-file config.agentYaml=./my-workflow-config.yaml \\\n  -n your-namespace\n"})}),"\n",(0,l.jsx)(n.h2,{id:"uninstalling-agents-or-workflows",children:"Uninstalling Agents or Workflows"}),"\n",(0,l.jsx)(n.p,{children:"To remove an agent or workflow:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Agent"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm uninstall my-agent -n your-namespace\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Workflow"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"helm uninstall my-workflow -n your-namespace\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Note:"})," This does NOT delete:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"The agent's database (manual cleanup required)"}),"\n",(0,l.jsx)(n.li,{children:"Any data in S3 storage"}),"\n",(0,l.jsx)(n.li,{children:"Any secrets you created manually"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"using-separate-database-and-s3-secrets",children:"Using Separate Database and S3 Secrets"}),"\n",(0,l.jsx)(n.p,{children:"For better security, create separate secrets for database and S3:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Database secret\nkubectl create secret generic my-db-secret \\\n  --from-literal=DATABASE_URL='postgresql+psycopg2://user:pass@host:5432/db' \\\n  -n your-namespace\n\n# S3 secret\nkubectl create secret generic my-s3-secret \\\n  --from-literal=S3_ENDPOINT_URL='https://s3.amazonaws.com' \\\n  --from-literal=S3_BUCKET_NAME='my-bucket' \\\n  --from-literal=AWS_ACCESS_KEY_ID='AKIAIOSFODNN7EXAMPLE' \\\n  --from-literal=AWS_SECRET_ACCESS_KEY='wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY' \\\n  -n your-namespace\n"})}),"\n",(0,l.jsx)(n.p,{children:"Then reference them in values:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'persistence:\n  existingSecrets:\n    database: "my-db-secret"\n    s3: "my-s3-secret"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"custom-resource-limits",children:"Custom Resource Limits"}),"\n",(0,l.jsx)(n.p,{children:"Adjust resource requests/limits based on your workload:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"resources:\n  sam:\n    requests:\n      cpu: 500m\n      memory: 512Mi\n    limits:\n      cpu: 1000m\n      memory: 1024Mi\n"})}),"\n",(0,l.jsx)(n.h3,{id:"additional-environment-variables",children:"Additional Environment Variables"}),"\n",(0,l.jsx)(n.p,{children:"Add custom environment variables:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'environmentVariables:\n  MY_CUSTOM_VAR: "value"\n  ANOTHER_VAR: "another_value"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"See Solace Agent Mesh documentation for agent or workflow configuration format"}),"\n",(0,l.jsx)(n.li,{children:"Set up monitoring and alerting for your agents"}),"\n",(0,l.jsx)(n.li,{children:"Implement backup strategies for agent databases"}),"\n",(0,l.jsx)(n.li,{children:"Consider using external-secrets operator for credential management"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const l={},i=r.createContext(l);function t(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);