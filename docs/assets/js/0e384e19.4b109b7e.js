"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[976],{2053:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"intro","title":"Getting Started","description":"This Helm chart deploys Solace Agent Mesh (SAM) in enterprise mode on Kubernetes.","source":"@site/docs/intro.md","sourceDirName":".","slug":"/","permalink":"/solace-agent-mesh-helm-quickstart/docs/","draft":false,"unlisted":false,"editUrl":"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/edit/main/docs/intro.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"slug":"/","title":"Getting Started"},"sidebar":"tutorialSidebar","next":{"title":"Network Configuration","permalink":"/solace-agent-mesh-helm-quickstart/docs/network-configuration"}}');var i=s(4848),l=s(8453);const a={sidebar_position:1,slug:"/",title:"Getting Started"},t="Solace Agent Mesh (SAM) - Helm Chart",o={},c=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Step 1: Add Helm Repository",id:"step-1-add-helm-repository",level:3},{value:"Step 2: Configure Image Pull Secret",id:"step-2-configure-image-pull-secret",level:3},{value:"Step 3: Prepare and update Helm values",id:"step-3-prepare-and-update-helm-values",level:3},{value:"Step 4: Install the Chart",id:"step-4-install-the-chart",level:3},{value:"Step 5: Verify Deployment",id:"step-5-verify-deployment",level:3},{value:"Accessing SAM",id:"accessing-sam",level:2},{value:"Standalone Agent and Workflow Deployment",id:"standalone-agent-and-workflow-deployment",level:2},{value:"Upgrading",id:"upgrading",level:2},{value:"Platform Service Architecture (v1.1.0+)",id:"platform-service-architecture-v110",level:3},{value:"For Ingress Users",id:"for-ingress-users",level:4},{value:"For LoadBalancer Users",id:"for-loadbalancer-users",level:4},{value:"For Local Development Users (Port-Forward)",id:"for-local-development-users-port-forward",level:4},{value:"Bundled Persistence VCT Labels (Upgrading from \u22641.1.0)",id:"bundled-persistence-vct-labels-upgrading-from-110",level:3},{value:"Migration Procedure",id:"migration-procedure",level:4},{value:"Upgrading SAM Core Deployment",id:"upgrading-sam-core-deployment",level:3},{value:"Option 1: Retrieve and Update Existing Values",id:"option-1-retrieve-and-update-existing-values",level:4},{value:"Option 2: Reuse Existing Values with Specific Overrides",id:"option-2-reuse-existing-values-with-specific-overrides",level:4},{value:"Option 3: Use Your Original Values File with Updates",id:"option-3-use-your-original-values-file-with-updates",level:4},{value:"Upgrading SAM Agents and Workflows",id:"upgrading-sam-agents-and-workflows",level:3},{value:"Uninstalling",id:"uninstalling",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Required Configuration",id:"required-configuration",level:3},{value:"Service Configuration",id:"service-configuration",level:3},{value:"Resource Limits",id:"resource-limits",level:3},{value:"Persistence",id:"persistence",level:3},{value:"Role-Based Access Control (RBAC)",id:"role-based-access-control-rbac",level:3},{value:"Understanding Roles and Permissions",id:"understanding-roles-and-permissions",level:4},{value:"Option 1: Updating ConfigMaps Directly (Quick Changes)",id:"option-1-updating-configmaps-directly-quick-changes",level:4},{value:"Option 2: Updating the Helm Chart (Persistent Changes)",id:"option-2-updating-the-helm-chart-persistent-changes",level:4},{value:"Common Scope Patterns",id:"common-scope-patterns",level:4},{value:"Verifying User Access",id:"verifying-user-access",level:4},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"solace-agent-mesh-sam---helm-chart",children:"Solace Agent Mesh (SAM) - Helm Chart"})}),"\n",(0,i.jsx)(n.p,{children:"This Helm chart deploys Solace Agent Mesh (SAM) in enterprise mode on Kubernetes."}),"\n",(0,i.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#prerequisites",children:"Prerequisites"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#installation",children:"Installation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#step-1-add-helm-repository",children:"Step 1: Add Helm Repository"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#step-2-configure-image-pull-secret",children:"Step 2: Configure Image Pull Secret"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#step-3-prepare-and-update-helm-values",children:"Step 3: Prepare and update Helm values"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#step-4-install-the-chart",children:"Step 4: Install the Chart"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#accessing-sam",children:"Accessing SAM"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#network-configuration",children:"Network Configuration"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#standalone-agent-deployment",children:"Standalone Agent and Workflow Deployment"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#upgrading",children:"Upgrading"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#uninstalling",children:"Uninstalling"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#configuration-options",children:"Configuration Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#required-configuration",children:"Required Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#service-configuration",children:"Service Configuration"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#resource-limits",children:"Resource Limits"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#persistence",children:"Persistence"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"#role-based-access-control-rbac",children:"Role-Based Access Control (RBAC)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#understanding-roles-and-permissions",children:"Understanding Roles and Permissions"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#option-1-updating-configmaps-directly-quick-changes",children:"Option 1: Updating ConfigMaps Directly (Quick Changes)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#option-2-updating-the-helm-chart-persistent-changes",children:"Option 2: Updating the Helm Chart (Persistent Changes)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#common-scope-patterns",children:"Common Scope Patterns"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#verifying-user-access",children:"Verifying User Access"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Kubernetes cluster (1.34+)"}),"\n",(0,i.jsxs)(n.li,{children:["Kubernetes nodes with sufficient disk space (minimum 30 GB recommended; see ",(0,i.jsx)(n.a,{href:"troubleshooting#insufficient-node-disk-space",children:"Troubleshooting"}),' if you encounter "no space left on device" errors)']}),"\n",(0,i.jsxs)(n.li,{children:["Helm 3.19.0+ (Download from ",(0,i.jsx)(n.a,{href:"https://helm.sh/docs/intro/install/",children:"https://helm.sh/docs/intro/install/"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"kubectl configured to communicate with your cluster"}),"\n",(0,i.jsxs)(n.li,{children:["A Solace Event Broker instance","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/pubsubplus-kubernetes-helm-quickstart/blob/master/docs/PubSubPlusK8SDeployment.md",children:"Deploy on Kubernetes using Helm"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.solace.com/Cloud/ggs_create_first_service.htm",children:"Create an event broker on Solace Cloud"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"LLM service credentials (e.g., OpenAI API key)"}),"\n",(0,i.jsx)(n.li,{children:"OIDC provider configured (for enterprise mode authentication)"}),"\n",(0,i.jsx)(n.li,{children:"TLS certificate and key files (only for LoadBalancer/NodePort without Ingress; not needed when using Ingress with ACM/cert-manager)"}),"\n",(0,i.jsx)(n.li,{children:"PostgreSQL database (version 17+, for production deployments with external persistence)"}),"\n",(0,i.jsx)(n.li,{children:"S3-compatible storage (e.g., Amazon S3, for production deployments with external persistence)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["Before installing SAM, review the available ",(0,i.jsx)(n.a,{href:"#step-3-prepare-and-update-helm-values",children:"configuration templates"})," and customize the values according to your deployment requirements. For detailed configuration options, see the ",(0,i.jsx)(n.a,{href:"#configuration-options",children:"Configuration Options"})," section."]}),"\n",(0,i.jsx)(n.h3,{id:"step-1-add-helm-repository",children:"Step 1: Add Helm Repository"}),"\n",(0,i.jsx)(n.p,{children:"Add the Solace Agent Mesh Helm repository:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm repo add solace-agent-mesh https://solaceproducts.github.io/solace-agent-mesh-helm-quickstart/\nhelm repo update\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Helm chart releases are accessible at: ",(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/tree/gh-pages",children:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/tree/gh-pages"})]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-configure-image-pull-secret",children:"Step 2: Configure Image Pull Secret"}),"\n",(0,i.jsx)(n.p,{children:"SAM requires access to container images. You have two options:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 1: Use Solace Cloud Image Pull Secret (Recommended)"})}),"\n",(0,i.jsxs)(n.p,{children:["Obtain the image pull secret from Solace Cloud following the instructions in the ",(0,i.jsx)(n.a,{href:"https://docs.solace.com/Cloud/private_regions_tab.htm#Download",children:"Downloading Registry Credentials"})," section of the Solace Cloud documentation."]}),"\n",(0,i.jsx)(n.p,{children:"Create the secret in your Kubernetes cluster:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f <path-to-downloaded-secret-file>.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Option 2: Use Your Own Container Registry"})}),"\n",(0,i.jsx)(n.p,{children:"Download the SAM images from Solace Products, push them to your own container registry, and create an image pull secret for your registry:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl create secret docker-registry my-registry-secret \\\n  --docker-server=<your-registry-server> \\\n  --docker-username=<your-username> \\\n  --docker-password=<your-password> \\\n  --docker-email=<your-email>\n"})}),"\n",(0,i.jsx)(n.p,{children:"When using your own registry, you'll also need to update the image repository paths in your values file (Step 3)."}),"\n",(0,i.jsx)(n.h3,{id:"step-3-prepare-and-update-helm-values",children:"Step 3: Prepare and update Helm values"}),"\n",(0,i.jsxs)(n.p,{children:["Choose one of the sample values files based on your deployment needs. Before proceeding, review the ",(0,i.jsx)(n.a,{href:"#required-configuration",children:"Required Configuration"})," section to understand what values you need to provide."]}),"\n",(0,i.jsxs)(n.p,{children:["Sample values: ",(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/tree/main/samples/values/",children:"samples/values"})]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/blob/main/samples/values/sam-tls-bundled-persistence-no-auth.yaml",children:(0,i.jsx)(n.code,{children:"sam-tls-bundled-persistence-no-auth.yaml"})})})," \u26a0\ufe0f ",(0,i.jsx)(n.strong,{children:"Development Only"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enterprise features enabled (agent builder), no authentication/RBAC"}),"\n",(0,i.jsx)(n.li,{children:"Bundled persistence (PostgreSQL + SeaweedFS)"}),"\n",(0,i.jsx)(n.li,{children:"For local development and testing only"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/blob/main/samples/values/sam-tls-oidc-bundled-persistence.yaml",children:(0,i.jsx)(n.code,{children:"sam-tls-oidc-bundled-persistence.yaml"})})})," - ",(0,i.jsx)(n.strong,{children:"POC/Demo"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OIDC authentication, bundled persistence"}),"\n",(0,i.jsx)(n.li,{children:"For quick start, proof-of-concept, or demo environments"}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": When using bundled persistence in managed cloud providers, configure regional node pools (one per availability zone) and a default StorageClass with ",(0,i.jsx)(n.code,{children:"volumeBindingMode: WaitForFirstConsumer"})," to prevent scheduling failures"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/blob/main/samples/values/sam-tls-oidc-customer-provided-persistence.yaml",children:(0,i.jsx)(n.code,{children:"sam-tls-oidc-customer-provided-persistence.yaml"})})})," \u2b50 ",(0,i.jsx)(n.strong,{children:"Production"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"OIDC authentication, external PostgreSQL + S3"}),"\n",(0,i.jsx)(n.li,{children:"For production deployments with managed database/storage"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": TLS certificates are only required when using ",(0,i.jsx)(n.code,{children:"service.type: LoadBalancer"})," or ",(0,i.jsx)(n.code,{children:"NodePort"}),". When using Ingress, TLS is managed at the Ingress level (see ",(0,i.jsx)(n.a,{href:"network-configuration",children:"Network Configuration Guide"}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Copy your chosen template and customize it:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cp samples/values/sam-tls-oidc-bundled-persistence.yaml custom-values.yaml\n# Edit custom-values.yaml with your configuration\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Key values to update:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam.dnsName"}),": Your DNS hostname"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam.sessionSecretKey"}),": Generate a secure random string"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam.oauthProvider.oidc"}),": Your OIDC provider details"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam.authenticationRbac.users"}),": User email addresses and roles"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"broker.*"}),": Your Solace broker credentials"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"llmService.*"}),": Your LLM service credentials"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"samDeployment.imagePullSecret"}),": ",(0,i.jsx)(n.strong,{children:"Required"})," the name of the image pull secret you created in Step 2 (e.g., ",(0,i.jsx)(n.code,{children:"solace-image-pull-secret"})," or ",(0,i.jsx)(n.code,{children:"my-registry-secret"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"samDeployment.image.repository"}),": The image repository path (if you are using your own registry from Step 2, Option 2)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"samDeployment.image.tag"}),": The version of the SAM application image (if you are using a specific version)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"samDeployment.agentDeployer.image.repository"}),": Agent deployer image repository path (if using your own registry from Step 2, Option 2)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"samDeployment.agentDeployer.image.tag"}),": Agent deployer image version (if using specific version)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-4-install-the-chart",children:"Step 4: Install the Chart"}),"\n",(0,i.jsx)(n.p,{children:"Install using Helm with your custom values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm install agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -f custom-values.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"For LoadBalancer/NodePort with TLS"}),", provide certificates using one of these methods:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Option 1: Reference an existing TLS secret (recommended)\nhelm install agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -f custom-values.yaml \\\n  --set service.tls.existingSecret=my-tls-secret\n\n# Option 2: Provide certificates via --set-file\nhelm install agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -f custom-values.yaml \\\n  --set-file service.tls.cert=/path/to/tls.crt \\\n  --set-file service.tls.key=/path/to/tls.key\n"})}),"\n",(0,i.jsxs)(n.p,{children:["To install a specific version (see ",(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/tree/gh-pages",children:"available releases"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# List available versions\nhelm search repo solace-agent-mesh/solace-agent-mesh --versions\n\n# Install specific version\nhelm install agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  --version 1.0.0 \\\n  -f custom-values.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note"}),": TLS certificates are only required when using ",(0,i.jsx)(n.code,{children:"service.type: LoadBalancer"})," or ",(0,i.jsx)(n.code,{children:"NodePort"}),". When using Ingress, TLS is managed at the Ingress level. See the ",(0,i.jsx)(n.a,{href:"network-configuration",children:"Network Configuration Guide"})," for details."]}),"\n",(0,i.jsx)(n.h3,{id:"step-5-verify-deployment",children:"Step 5: Verify Deployment"}),"\n",(0,i.jsx)(n.p,{children:"Check the deployment status:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check Helm release status\nhelm status agent-mesh\n\n# Check pod status\nkubectl get pods -l app.kubernetes.io/instance=agent-mesh\n"})}),"\n",(0,i.jsx)(n.h2,{id:"accessing-sam",children:"Accessing SAM"}),"\n",(0,i.jsx)(n.p,{children:"SAM can be accessed through LoadBalancer, NodePort, Ingress, or port-forward depending on your service configuration."}),"\n",(0,i.jsxs)(n.p,{children:["For detailed network configuration options, access methods, and production deployment recommendations, see the ",(0,i.jsx)(n.a,{href:"network-configuration",children:"Network Configuration Guide"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"standalone-agent-and-workflow-deployment",children:"Standalone Agent and Workflow Deployment"}),"\n",(0,i.jsx)(n.p,{children:"While SAM includes an agent-deployer microservice that dynamically deploys agents via the UI/API, you can also deploy agents independently using direct Helm commands. This approach is useful for GitOps workflows, multi-cluster deployments, or independent agent management."}),"\n",(0,i.jsxs)(n.p,{children:["For detailed instructions, see the ",(0,i.jsx)(n.a,{href:"standalone-agent-deployment",children:"Standalone Agent and Workflow Deployment"})," section."]}),"\n",(0,i.jsx)(n.h2,{id:"upgrading",children:"Upgrading"}),"\n",(0,i.jsx)(n.p,{children:"Before upgrading, always update your Helm repository to get the latest chart versions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm repo update solace-agent-mesh\n"})}),"\n",(0,i.jsx)(n.h3,{id:"platform-service-architecture-v110",children:"Platform Service Architecture (v1.1.0+)"}),"\n",(0,i.jsx)(n.p,{children:"Starting with v1.1.0, SAM splits platform management APIs into a separate service for improved architecture and scalability:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"WebUI Service"})," (port 8000/8443): Web interface and gateway"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Platform Service"})," (port 8001/4443): Platform management APIs (agents, deployments, connectors, toolsets)"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"The upgrade is seamless"})," - no manual configuration changes required."]}),"\n",(0,i.jsx)(n.h4,{id:"for-ingress-users",children:"For Ingress Users"}),"\n",(0,i.jsxs)(n.p,{children:["Simply run ",(0,i.jsx)(n.code,{children:"helm upgrade"})," with your existing values file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade <release-name> solace-agent-mesh/solace-agent-mesh \\\n  -f your-existing-values.yaml \\\n  -n <namespace>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What happens automatically:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"autoConfigurePaths: true"})," is enabled by default"]}),"\n",(0,i.jsxs)(n.li,{children:["Platform routes (",(0,i.jsx)(n.code,{children:"/api/v1/platform/*"}),") are automatically configured"]}),"\n",(0,i.jsxs)(n.li,{children:["Auth routes (",(0,i.jsx)(n.code,{children:"/login"}),", ",(0,i.jsx)(n.code,{children:"/callback"}),", etc.) are automatically configured"]}),"\n",(0,i.jsx)(n.li,{children:"Your existing settings (annotations, className, TLS, etc.) are preserved"}),"\n",(0,i.jsx)(n.li,{children:"Zero downtime - Kubernetes updates Ingress resource in-place"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verification:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check WebUI health\ncurl -k https://sam.example.com/health\n\n# Check Platform API health\ncurl -k https://sam.example.com/api/v1/platform/health\n"})}),"\n",(0,i.jsx)(n.h4,{id:"for-loadbalancer-users",children:"For LoadBalancer Users"}),"\n",(0,i.jsxs)(n.p,{children:["Simply run ",(0,i.jsx)(n.code,{children:"helm upgrade"})," with your existing values file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade <release-name> solace-agent-mesh/solace-agent-mesh \\\n  -f your-existing-values.yaml \\\n  -n <namespace>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What happens automatically:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Platform service ports (4443 HTTPS, 8080 HTTP) are added to LoadBalancer"}),"\n",(0,i.jsx)(n.li,{children:"WebUI continues on existing ports (443 HTTPS, 80 HTTP)"}),"\n",(0,i.jsx)(n.li,{children:"Same external IP - just additional ports exposed"}),"\n",(0,i.jsx)(n.li,{children:"No DNS changes needed"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Access after upgrade:"})}),"\n",(0,i.jsx)(n.p,{children:"With TLS enabled:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Web UI: ",(0,i.jsx)(n.code,{children:"https://<EXTERNAL-IP>"})," (unchanged)"]}),"\n",(0,i.jsxs)(n.li,{children:["Platform API: ",(0,i.jsx)(n.code,{children:"https://<EXTERNAL-IP>:4443"})," (new)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Without TLS:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Web UI: ",(0,i.jsx)(n.code,{children:"http://<EXTERNAL-IP>"})," (unchanged)"]}),"\n",(0,i.jsxs)(n.li,{children:["Platform API: ",(0,i.jsx)(n.code,{children:"http://<EXTERNAL-IP>:8080"})," (new)"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verification:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Get external IP\nEXTERNAL_IP=$(kubectl get svc <release-name> -n <namespace> -o jsonpath='{.status.loadBalancer.ingress[0].hostname}')\n\n# Check WebUI health (port 443 or 80)\ncurl -k https://$EXTERNAL_IP/health\n\n# Check Platform API health (port 4443 or 8080)\ncurl -k https://$EXTERNAL_IP:4443/api/v1/platform/health\n"})}),"\n",(0,i.jsx)(n.h4,{id:"for-local-development-users-port-forward",children:"For Local Development Users (Port-Forward)"}),"\n",(0,i.jsxs)(n.p,{children:["If you're using ",(0,i.jsx)(n.code,{children:"kubectl port-forward"})," for local development:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl port-forward svc/<release-name> 8000:80 8001:8001\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," Use port 8000 specifically - it's pre-configured in CORS allowed origins. Using other ports will cause CORS errors. See ",(0,i.jsx)(n.a,{href:"network-configuration#local-development-with-port-forward",children:"Network Configuration - Local Development"})," for details."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"bundled-persistence-vct-labels-upgrading-from-110",children:"Bundled Persistence VCT Labels (Upgrading from \u22641.1.0)"}),"\n",(0,i.jsx)(n.admonition,{title:"Migration Required",type:"warning",children:(0,i.jsxs)(n.p,{children:["This section only applies if you are using ",(0,i.jsx)(n.strong,{children:"bundled persistence"})," (",(0,i.jsx)(n.code,{children:"global.persistence.enabled: true"}),") and upgrading from chart version \u22641.1.0. External persistence users and new installations are ",(0,i.jsx)(n.strong,{children:"not affected"}),"."]})}),"\n",(0,i.jsx)(n.p,{children:"Starting with chart versions after 1.1.0, the bundled persistence layer uses minimal VolumeClaimTemplate (VCT) labels for StatefulSets. This change prevents upgrade failures when labels change over time, but requires a one-time migration for existing deployments."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Why this matters:"})," Kubernetes StatefulSet VCT labels are immutable. Without migration, upgrades will fail with:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"StatefulSet.apps \"xxx-postgresql\" is invalid: spec: Forbidden: updates to statefulset spec\nfor fields other than 'replicas', 'ordinals', 'template', 'updateStrategy'... are forbidden\n"})}),"\n",(0,i.jsx)(n.h4,{id:"migration-procedure",children:"Migration Procedure"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1:"})," Delete StatefulSets while preserving data (PVCs are retained):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl delete sts <release>-postgresql <release>-seaweedfs --cascade=orphan -n <namespace>\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2:"})," Upgrade the Helm release:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade <release> solace-agent-mesh/solace-agent-mesh \\\n  -f your-values.yaml \\\n  -n <namespace>\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3:"})," Verify the upgrade succeeded and data is intact:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check pods are running\nkubectl get pods -l app.kubernetes.io/instance=<release> -n <namespace>\n\n# Verify PVCs are still bound\nkubectl get pvc -l app.kubernetes.io/instance=<release> -n <namespace>\n"})}),"\n",(0,i.jsx)(n.p,{children:"The new StatefulSets are created with minimal VCT labels and automatically reattach to the existing PVCs, preserving all your data."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"upgrading-sam-core-deployment",children:"Upgrading SAM Core Deployment"}),"\n",(0,i.jsx)(n.p,{children:"To upgrade your SAM core deployment, you can reuse your existing Helm values and apply updates on top of them."}),"\n",(0,i.jsx)(n.h4,{id:"option-1-retrieve-and-update-existing-values",children:"Option 1: Retrieve and Update Existing Values"}),"\n",(0,i.jsx)(n.p,{children:"Get your current deployment values and save them to a file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm get values agent-mesh -n <namespace> > current-values.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Review and edit ",(0,i.jsx)(n.code,{children:"current-values.yaml"})," to make your desired changes, then upgrade:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -n <namespace> \\\n  -f current-values.yaml \\\n  --set-file service.tls.cert=/path/to/tls.crt \\\n  --set-file service.tls.key=/path/to/tls.key\n"})}),"\n",(0,i.jsx)(n.h4,{id:"option-2-reuse-existing-values-with-specific-overrides",children:"Option 2: Reuse Existing Values with Specific Overrides"}),"\n",(0,i.jsx)(n.p,{children:"Reuse all existing values and override specific values:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Upgrade while reusing existing values and updating specific settings\nhelm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -n <namespace> \\\n  --reuse-values \\\n  --set samDeployment.image.tag=new-version \\\n  --set-file service.tls.cert=/path/to/tls.crt \\\n  --set-file service.tls.key=/path/to/tls.key\n"})}),"\n",(0,i.jsx)(n.h4,{id:"option-3-use-your-original-values-file-with-updates",children:"Option 3: Use Your Original Values File with Updates"}),"\n",(0,i.jsxs)(n.p,{children:["If you still have your original ",(0,i.jsx)(n.code,{children:"custom-values.yaml"})," file, update it with any new changes and upgrade:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -n <namespace> \\\n  -f custom-values.yaml \\\n  --set-file service.tls.cert=/path/to/tls.crt \\\n  --set-file service.tls.key=/path/to/tls.key\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," After upgrading, verify the deployment status:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl rollout status deployment/agent-mesh-core -n <namespace>\nkubectl get pods -n <namespace> -l app.kubernetes.io/instance=agent-mesh\n"})}),"\n",(0,i.jsx)(n.h3,{id:"upgrading-sam-agents-and-workflows",children:"Upgrading SAM Agents and Workflows"}),"\n",(0,i.jsx)(n.p,{children:"To upgrade an individual agent or workflow deployed using SAM, use its release name and update its image tag:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Important:"})," If the agent or workflow chart name has changed between versions, you may need to delete and recreate the agent deployment instead of upgrading. See ",(0,i.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})," below."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Update Helm repository first\nhelm repo update solace-agent-mesh\n\n# Upgrade the agent or workflow with new image version\nhelm upgrade -i <agent or workflow-release-name> solace-agent-mesh/sam-agent \\\n  -n <namespace> \\\n  --reuse-values \\\n  --set image.tag=<new-version>\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Example:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade -i sam-agent-0a42a319-13a8-4b31-b696-9f750d5c6a20 solace-agent-mesh/sam-agent \\\n  -n fwanssa \\\n  --reuse-values \\\n  --set image.tag=1.65.45\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Verify the agent or workflow upgrade:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get deployment <agent or workflow-release-name> -n <namespace>\nkubectl logs deployment/<agent or workflow-release-name> -n <namespace> --tail=50\n"})}),"\n",(0,i.jsx)(n.h2,{id:"uninstalling",children:"Uninstalling"}),"\n",(0,i.jsx)(n.p,{children:"To uninstall the chart:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm uninstall agent-mesh\n"})}),"\n",(0,i.jsx)(n.p,{children:"Note: This will not delete PersistentVolumeClaims when using bundled persistence. To delete them:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl delete pvc -l app.kubernetes.io/instance=agent-mesh\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsx)(n.h3,{id:"required-configuration",children:"Required Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["Before deploying SAM, you must configure the following required values in your ",(0,i.jsx)(n.code,{children:"values.yaml"})," or custom values file:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"SAM Configuration"})," (",(0,i.jsx)(n.code,{children:"sam"})," section):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dnsName"}),": DNS-resolvable hostname for SAM web UI/API (e.g., ",(0,i.jsx)(n.code,{children:"sam.example.com"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sessionSecretKey"}),": Secret key for session management"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Solace Broker Configuration"})," (",(0,i.jsx)(n.code,{children:"broker"})," section):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"url"}),": WebSocket Secure URL to your broker (e.g., ",(0,i.jsx)(n.code,{children:"wss://mr2zq0g0f1.messaging.solace.cloud:443"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"clientUsername"}),": Broker username"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"password"}),": Broker password"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"vpn"}),": VPN name"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"LLM Service Configuration"})," (",(0,i.jsx)(n.code,{children:"llmService"})," section):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"planningModel"}),", ",(0,i.jsx)(n.code,{children:"generalModel"}),", ",(0,i.jsx)(n.code,{children:"reportModel"}),", ",(0,i.jsx)(n.code,{children:"imageModel"}),", ",(0,i.jsx)(n.code,{children:"transcriptionModel"}),": Model names"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"llmServiceEndpoint"}),": LLM service API endpoint (e.g., ",(0,i.jsx)(n.code,{children:"https://api.openai.com/v1"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"llmServiceApiKey"}),": API key for LLM service"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"service-configuration",children:"Service Configuration"}),"\n",(0,i.jsx)(n.p,{children:"SAM supports multiple exposure methods. The default is ClusterIP with Ingress for production use:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'service:\n  type: ClusterIP  # or LoadBalancer, NodePort\n  annotations: {}\n  tls:\n    enabled: false  # Set to true for LoadBalancer/NodePort without Ingress\n    passphrase: ""\n\ningress:\n  enabled: false  # Set to true for production deployments\n  className: "alb"  # or "nginx", "traefik", etc.\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["For detailed configuration options and examples, see the ",(0,i.jsx)(n.a,{href:"network-configuration",children:"Network Configuration Guide"}),"."]})}),"\n",(0,i.jsx)(n.h3,{id:"resource-limits",children:"Resource Limits"}),"\n",(0,i.jsx)(n.p,{children:"Adjust resource requests and limits based on your workload:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"samDeployment:\n  resources:\n    sam:\n      requests:\n        cpu: 1000m\n        memory: 1024Mi\n      limits:\n        cpu: 2000m\n        memory: 2048Mi\n    agentDeployer:\n      requests:\n        cpu: 100m\n        memory: 256Mi\n      limits:\n        cpu: 200m\n        memory: 512Mi\n"})}),"\n",(0,i.jsx)(n.h3,{id:"persistence",children:"Persistence"}),"\n",(0,i.jsx)(n.p,{children:"SAM requires persistent storage for session data and artifacts. You can choose between:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Bundled Persistence"})," (Dev/POC): In-cluster PostgreSQL and SeaweedFS"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"External Persistence"})," (Production): Managed PostgreSQL and S3-compatible storage"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For detailed configuration options, image registry settings, and provider-specific examples, see the ",(0,i.jsx)(n.a,{href:"persistence",children:"Persistence Configuration"})," documentation."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Quick Start (Bundled Persistence):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'global:\n  persistence:\n    enabled: true\n    namespaceId: "solace-agent-mesh"  # Must be unique per SAM installation\n'})}),"\n",(0,i.jsx)(n.h3,{id:"role-based-access-control-rbac",children:"Role-Based Access Control (RBAC)"}),"\n",(0,i.jsx)(n.p,{children:"When SAM is deployed in enterprise mode, it includes a built-in RBAC system to control user access to tools and features. The RBAC configuration is managed through Kubernetes ConfigMaps."}),"\n",(0,i.jsx)(n.h4,{id:"understanding-roles-and-permissions",children:"Understanding Roles and Permissions"}),"\n",(0,i.jsx)(n.p,{children:"The RBAC system consists of:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Roles"}),": Named collections of permissions (scopes)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"User Assignments"}),": Mappings of users (by email) to roles"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"By default, two roles are provided:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam_admin"}),": Full access to all features (scope: ",(0,i.jsx)(n.code,{children:"*"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam_user"}),": Basic access to read artifacts and basic tools"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"option-1-updating-configmaps-directly-quick-changes",children:"Option 1: Updating ConfigMaps Directly (Quick Changes)"}),"\n",(0,i.jsx)(n.p,{children:"For quick changes to running deployments, you can edit the ConfigMaps directly:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u26a0\ufe0f Warning:"})," Changes made directly to ConfigMaps will be overwritten on the next Helm upgrade. To persist changes, update the Helm chart (Option 2)."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Edit role definitions:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl edit configmap <release-name>-role-definitions\n# Example: kubectl edit configmap agent-mesh-role-definitions\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Modify the ",(0,i.jsx)(n.code,{children:"role-to-scope-definitions.yaml"})," data:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'data:\n  role-to-scope-definitions.yaml: |\n    roles:\n      sam_admin:\n        description: "Full access for SAM administrators"\n        scopes:\n          - "*"\n\n      custom_role:\n        description: "Your custom role"\n        scopes:\n          - "artifact:read"\n          - "tool:custom:*"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Edit user role assignments:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl edit configmap <release-name>-user-roles\n# Example: kubectl edit configmap agent-mesh-user-roles\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Note:"})," Email addresses in user-to-role-assignments must all be lowercase."]}),"\n",(0,i.jsxs)(n.p,{children:["Modify the ",(0,i.jsx)(n.code,{children:"user-to-role-assignments.yaml"})," data:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'data:\n  user-to-role-assignments.yaml: |\n    users:\n      admin@example.com:\n        roles: ["sam_admin"]\n        description: "SAM Administrator"\n\n      newuser@example.com:\n        roles: ["sam_user"]\n        description: "New User"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Restart the deployment to apply changes:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl rollout restart deployment/<release-name>\n# Example: kubectl rollout restart deployment/solace-agent-mesh\n"})}),"\n",(0,i.jsx)(n.h4,{id:"option-2-updating-the-helm-chart-persistent-changes",children:"Option 2: Updating the Helm Chart (Persistent Changes)"}),"\n",(0,i.jsx)(n.p,{children:"To make permanent changes that survive Helm upgrades:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"1. Edit the chart template"})," ",(0,i.jsx)(n.code,{children:"charts/solace-agent-mesh/templates/configmap_sam_config_files.yaml"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["Find the ",(0,i.jsx)(n.code,{children:"sam-role-definitions"})," ConfigMap section (around line 340) and modify roles:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'data:\n  role-to-scope-definitions.yaml: |\n    roles:\n      sam_admin:\n        description: "Full access for SAM administrators"\n        scopes:\n          - "*"\n\n      custom_role:\n        description: "Your custom role"\n        scopes:\n          - "artifact:read"\n          - "tool:specific:action"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Find the ",(0,i.jsx)(n.code,{children:"sam-user-roles"})," ConfigMap section (around line 369) and modify user assignments:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'data:\n  user-to-role-assignments.yaml: |\n    users:\n      admin@example.com:\n        roles: ["sam_admin"]\n        description: "SAM Administrator"\n\n      user@company.com:\n        roles: ["custom_role"]\n        description: "Custom role user"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Upgrade the Helm deployment:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade agent-mesh solace-agent-mesh/solace-agent-mesh \\\n  -f custom-values.yaml \\\n  --set-file service.tls.cert=/path/to/tls.crt \\\n  --set-file service.tls.key=/path/to/tls.key\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Verify the changes:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get configmap <release-name>-role-definitions -o yaml\nkubectl get configmap <release-name>-user-roles -o yaml\n# Example: kubectl get configmap agent-mesh-role-definitions -o yaml\n"})}),"\n",(0,i.jsx)(n.h4,{id:"common-scope-patterns",children:"Common Scope Patterns"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"*"})," - All permissions (admin access)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool:data:*"})," - All data-related tools"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool:specific:action"})," - Specific tool and action"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool:artifact:list"})," - List artifacts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"tool:artifact:load"})," - Download artifacts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:agent_builder:create"})," - Create agent builders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:agent_builder:read"})," - Read agent builders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:agent_builder:update"})," - Update agent builders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:agent_builder:delete"})," - Delete agent builders"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:connectors:create"})," - Create connectors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:connectors:read"})," - Read connectors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:connectors:update"})," - Update connectors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:connectors:delete"})," - Delete connectors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:deployments:create"})," - Create deployments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:deployments:read"})," - Read deployments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:deployments:update"})," - Update deployments"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"sam:deployments:delete"})," - Delete deployments"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"verifying-user-access",children:"Verifying User Access"}),"\n",(0,i.jsx)(n.p,{children:"After updating RBAC configuration:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Check pod logs"})," to verify configuration loaded:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl logs -l app.kubernetes.io/instance=agent-mesh --tail=50\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Test user access"})," by logging in as different users through the SAM web UI"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Review ConfigMaps"})," to confirm changes:"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl describe configmap <release-name>-role-definitions\nkubectl describe configmap <release-name>-user-roles\n# Example: kubectl describe configmap agent-mesh-role-definitions\n"})}),"\n",(0,i.jsxs)(n.p,{children:["For more details on RBAC configuration, see the ",(0,i.jsx)(n.a,{href:"http://solacelabs.github.io/solace-agent-mesh/docs/documentation/enterprise/rbac-setup-guide",children:"SAM RBAC Setup Guide"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.p,{children:["For troubleshooting common issues with SAM deployments, see the ",(0,i.jsx)(n.a,{href:"troubleshooting",children:"Troubleshooting Guide"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["For issues, questions, or contributions, please open an issue in ",(0,i.jsx)(n.a,{href:"https://github.com/SolaceProducts/solace-agent-mesh-helm-quickstart/issues",children:"GitHub Issues"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);